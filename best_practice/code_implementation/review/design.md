# レビュー

■PRの差分にレビュアー向け説明を書こう
- セルフレビューを行い、レビュアー向けに知識の差を埋めるための説明を書く。

■セルフレビュー効率化のためのプラクティス
1. 実装の根拠を書く・・・仕様や設計へのリンクの記載。仕様を満たしているか確認、コードを書くときに調べたことは、レビュアーにコメントで伝える。
2. 仕様や設計をまとめる・・・実装の根拠となる仕様の存在と内容を再確認できる。
3. コードを改善する・・・改善したコードに一通り「TODOコード改善(理由)」のようなコメントを書く。
4. 差分の説明をしてみる・・・確信を持てないコード差分や、解消できなかったTODOコメントは、レビュアーへの相談をコメントに書く。
5. PRの本文(description)に、「PRの目的」「仕様をまとめたページへのリンク」「レビューで確認してほしいこと」を書く・・・PRの目的、仕様元、確認ポイントをまとめる。
6. 差分コメントを恒久的な情報に移す・・・定数値の変更や問題回避のための変更差分の理由は、ソースコードのコメントに書く。ユニットテスト特有の情報はテストコードのdocstringに書く。

■PRに不要な差分を持たせないようにしょう
- PRの目的を一つに絞る。たとえばロジックの変更と単純なフォーマット変更は別のPRに分ける。
- PRの粒度は小さく保つ。1つの機能であっても巨大なPRにせず分割する方法を検討する。
- レビュアーのコストが低くなるように依頼する。
- レビュアーが差分をみたらすぐにレビューできる状態にしておく。
- プロジェクト全体でかけるコストが少ない方法を選択する。

■レビュアーはレビューの根拠を明示しよう
- プロジェクトメンバー全員でレビュー観点をまとめて、合意しておく。
- レビュアーは合意された観点をもとにレビューする。
- レビュー中に新しい観点に気づいた場合は、そのレビュー中は「提案」としてコメントを入れて、別途観点をまとめてチームで合意する。
- レビュー観点は、開発アーキテクチャドキュメントにまとめておく。

■レビューのチェックリストを作ろう
- レビュー前にチェックリストで漏れがないかチェックをする。

■レビュー時間をあらかじめ見積に含めよう
- 工数見積時に、レビュー時間も工数として明示的に見積もる。
- 時間をどのくらい見積もっておくかの指針がない場合は、実装時間の2割、のように決めておく。
- そして実際にレビュー時間を計測して次の見積もりに見直していく。